(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{32:function(e,a,t){e.exports=t.p+"static/media/logo.568bad83.svg"},44:function(e,a,t){e.exports=t(67)},49:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(13),o=t.n(r),s=(t(49),t(10)),l=(t(50),t(32)),i=t.n(l),m=(t(51),t(94)),u=t(18),p=t.n(u),d=p.a.initializeApp({apiKey:"AIzaSyCZWMttIQpQCi9kfcy-5CK962ZoJ3mG2yI",authDomain:"instagram-clone-cf700.firebaseapp.com",databaseURL:"https://instagram-clone-cf700.firebaseio.com",projectId:"instagram-clone-cf700",storageBucket:"instagram-clone-cf700.appspot.com",messagingSenderId:"759477215097",appId:"1:759477215097:web:f4fffa265e2ec2b52219a8",measurementId:"G-6JWX9YDB6Z"}).firestore(),f=p.a.auth(),g=p.a.storage();var E=function(e){var a=e.postId,t=e.user,r=e.username,o=e.caption,l=e.imageUrl,i=Object(n.useState)([]),u=Object(s.a)(i,2),f=u[0],g=u[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),b=h[0],v=h[1];return Object(n.useEffect)((function(){var e;return a&&(e=d.collection("posts").doc(a).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){g(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[a]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement(m.a,{className:"post__avatar",alt:r,src:"/static/images/avatar/1.jpg"}),c.a.createElement("h3",null,r)),c.a.createElement("img",{className:"post__image",src:l,alt:""}),c.a.createElement("h4",{className:"post__text"},c.a.createElement("strong",null,r)," ",o),c.a.createElement("div",{className:"post__comments"},f.map((function(e){return c.a.createElement("p",null,c.a.createElement("strong",null,e.username)," ",e.text)}))),t&&c.a.createElement("form",{className:"post__commentBox"},c.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:b,onChange:function(e){return v(e.target.value)}}),c.a.createElement("button",{className:"post__button",disabled:!b,type:"submit",onClick:function(e){e.preventDefault(),d.collection("posts").doc(a).collection("comments").add({text:b,username:t.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp()}),v("")}},"Post")))},h=t(90),b=t(91),v=t(93),_=t(92);t(66);var j=function(e){var a=e.username,t=Object(n.useState)(null),r=Object(s.a)(t,2),o=r[0],l=r[1],i=Object(n.useState)(0),m=Object(s.a)(i,2),u=m[0],f=m[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),b=h[0],v=h[1];return c.a.createElement("div",{className:"imageupload"},c.a.createElement("div",{className:"imageupload__container"},c.a.createElement("progress",{className:"imageupload__progress",value:u,max:"100"}),c.a.createElement("input",{className:"imageupload__upload",type:"file",onChange:function(e){e.target.files[0]&&l(e.target.files[0])}}),c.a.createElement("input",{className:"imageupload__caption",type:"text",placeholder:"Enter a caption...",onChange:function(e){return v(e.target.value)},value:b}),c.a.createElement(_.a,{className:"imageupload__submit",onClick:function(){g.ref("images/".concat(o.name)).put(o).on("state_changed",(function(e){var a=Math.round(e.bytesTransferred/e.totalBytes*100);f(a)}),(function(e){alert(e.message)}),(function(){g.ref("images").child(o.name).getDownloadURL().then((function(e){d.collection("posts").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),caption:b,imageUrl:e,username:a}),f(0),v(""),l(null)}))}))}},"Upload")))};function O(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var N=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=N(),a=Object(n.useState)(O),t=Object(s.a)(a,1)[0],r=Object(n.useState)([]),o=Object(s.a)(r,2),l=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),g=p[0],h=p[1],y=Object(n.useState)(""),C=Object(s.a)(y,2),S=C[0],w=C[1],k=Object(n.useState)(""),I=Object(s.a)(k,2),x=I[0],U=I[1],B=Object(n.useState)(""),A=Object(s.a)(B,2),D=A[0],W=A[1],L=Object(n.useState)(""),P=Object(s.a)(L,2),J=P[0],M=P[1],T=Object(n.useState)(null),Z=Object(s.a)(T,2),z=Z[0],F=Z[1];return Object(n.useEffect)((function(){var e=f.onAuthStateChanged((function(e){e?(console.log(e),F(e)):F(null)}));return function(){e()}}),[z,J]),Object(n.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),c.a.createElement("div",{className:"app"},z?c.a.createElement(j,{username:z.displayName}):c.a.createElement("h3",{className:"app__signInMessage"},"Please login to post photos"),c.a.createElement(b.a,{open:g,onClose:function(){return h(!1)}},c.a.createElement("div",{style:t,className:e.paper},c.a.createElement("form",{className:"app__signUp"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:i.a,alt:""})),c.a.createElement(v.a,{placeholder:"username",type:"text",value:J,onChange:function(e){return M(e.target.value)}}),c.a.createElement(v.a,{placeholder:"email",type:"email",value:x,onChange:function(e){return U(e.target.value)}}),c.a.createElement(v.a,{placeholder:"password",type:"password",value:D,onChange:function(e){return W(e.target.value)}}),c.a.createElement(_.a,{type:"submit",onClick:function(e){e.preventDefault(),f.createUserWithEmailAndPassword(x,D).then((function(e){return e.user.updateProfile({displayName:J})})).catch((function(e){return alert(e.message)})),h(!1)}},"Sign Up")))),c.a.createElement(b.a,{open:S,onClose:function(){return w(!1)}},c.a.createElement("div",{style:t,className:e.paper},c.a.createElement("form",{className:"app__signUp"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:i.a,alt:""})),c.a.createElement(v.a,{placeholder:"email",type:"email",value:x,onChange:function(e){return U(e.target.value)}}),c.a.createElement(v.a,{placeholder:"password",type:"password",value:D,onChange:function(e){return W(e.target.value)}}),c.a.createElement(_.a,{type:"submit",onClick:function(e){e.preventDefault(),f.signInWithEmailAndPassword(x,D).catch((function(e){return alert(e.message)})),w(!1)}},"Login")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("div",{className:"app__headerContainer"},c.a.createElement("img",{className:"app__headerImage",src:i.a,alt:""}),z?c.a.createElement(_.a,{onClick:function(){return f.signOut()}},"Logout"):c.a.createElement("div",{className:"app__loginContainer"},c.a.createElement(_.a,{onClick:function(){return w(!0)}},"Login"),c.a.createElement(_.a,{onClick:function(){return h(!0)}},"Sign Up")))),l.map((function(e){var a=e.id,t=e.post;return c.a.createElement(E,{key:a,postId:a,user:z,username:t.username,caption:t.caption,imageUrl:t.imageUrl})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.d31573e1.chunk.js.map